{% extends 'base.html' %}

{% block title %}Кошик{% endblock %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/cart.css' %}">
{% endblock %}

{% block body %}
<div class="cart-container">
    <h2>Ваш кошик</h2>

    <form method="POST" class="cart-form">
        {% csrf_token %}
        {% for cart_item in cart_items %}
        <div class="order-card">
            <div class="order-header">
                <h3>
                    <a href="{% url 'order_details_cart' cart_item.order.id %}" class="order-link">
                        {{ cart_item.order.title }}
                    </a>
                </h3>
                <p><strong>Коментар:</strong> {{ cart_item.order.comments }}</p>
            </div>

            <div class="order-files">
                <h4>Файли в замовленні:</h4>
                {% for order_file in cart_item.order.files.all %}
                <div class="file-card">
                    <p><strong>Назва файлу:</strong> {{ order_file.file_name }}</p>
                    <div class="file-characteristics">
                        <p><strong>Матеріал:</strong> {{ order_file.characteristics.material }}</p>
                        <p><strong>Розмір:</strong> {{ order_file.characteristics.size }} %</p>
                        <p><strong>Копії:</strong> {{ order_file.characteristics.copies }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="order-summary">
                <label for="quantity_{{ cart_item.id }}">
                    <strong>Кількість у кошику:</strong>
                </label>
                <div class="quantity-container">
                    <input
                        type="number"
                        name="quantity_{{ cart_item.id }}"
                        id="quantity_{{ cart_item.id }}"
                        value="{{ cart_item.quantity }}"
                        min="1"
                        class="quantity-input">
                </div>

                <label for="selected_orders_{{ cart_item.id }}">
                    <strong>Купити?</strong>
                </label>
                <input
                    type="checkbox"
                    name="selected_orders"
                    value="{{ cart_item.id }}"
                    id="selected_orders_{{ cart_item.id }}">
            </div>
        </div>
        {% endfor %}

        <div class="form-actions">
            <button type="submit" name="action" value="update" class="update-button">Оновити</button>
            <button type="submit" name="action" value="purchase" class="purchase-button">Купити вибрані</button>
        </div>
    </form>
</div>
{% endblock %}
