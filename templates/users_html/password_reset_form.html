{% extends 'base.html' %}

{% block title %}Новий пароль{% endblock %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/password_reset_form.css' %}">
{% endblock %}

{% block body %}
<div class="password-change-container">
    <div class="card">
        <h2 class="card-title">Введіть новий пароль</h2>
        <form method="POST" class="password-change-form">
            {% csrf_token %}
            <div class="input-group">
                <label for="new_password">Новий пароль</label>
                <input type="password" id="new_password" name="new_password" required class="input-field">
            </div>

            <div class="input-group">
                <label for="confirm_password">Підтвердьте пароль</label>
                <input type="password" id="confirm_password" name="confirm_password" required class="input-field">
            </div>

            <div class="show-password-checkbox">
                <label for="show_password">
                    <input type="checkbox" id="show_password" onclick="togglePassword()"> Показати пароль
                </label>
            </div>

            {% if form.new_password.errors %}
                <div class="error-message">
                    {% for error in form.new_password.errors %}
                        <p class="error-text">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <button type="submit" class="submit-btn">Зберегти пароль</button>
        </form>
    </div>
</div>

<script>
    // Функція для перемикання видимості пароля
    function togglePassword() {
        var passwordFields = document.querySelectorAll('.input-field');
        var showPasswordCheckbox = document.getElementById('show_password');

        if (showPasswordCheckbox.checked) {
            passwordFields.forEach(function(field) {
                field.type = 'text';
            });
        } else {
            passwordFields.forEach(function(field) {
                field.type = 'password';
            });
        }
    }
</script>
{% endblock %}
