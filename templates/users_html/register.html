{% extends 'base.html' %}

{% block title %}Реєстрація{% endblock %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/register.css' %}">
{% endblock %}

{% block body %}
<div class="registration-wrapper">
    <div class="registration-container">
        <h2 class="form-title">Форма реєстрації</h2>
        <p class="form-subtitle">Заповніть форму для створення облікового запису</p>

        <form method="POST" enctype="multipart/form-data" novalidate>
            {% csrf_token %}

            <div class="form-group">
                <label>Ім'я</label>
                <input type="text" name="first_name" class="input-field" placeholder="Введіть ваше ім'я" value="{{ form.first_name.value|default:'' }}">
                <div class="error-message">{% for error in form.first_name.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group">
                <label>Прізвище</label>
                <input type="text" name="last_name" class="input-field" placeholder="Введіть ваше прізвище" value="{{ form.last_name.value|default:'' }}">
                <div class="error-message">{% for error in form.last_name.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group">
                <label>Пошта</label>
                <input type="email" name="email" class="input-field" placeholder="Введіть вашу пошту" value="{{ form.email.value|default:'' }}">
                <div class="error-message">{% for error in form.email.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group">
                <label>Країна</label>
                <select name="country" class="input-field">
                    <option value="">Оберіть країну</option>
                    {% for country in form.country.field.choices %}
                    <option value="{{ country.0 }}" {% if country.0 == form.country.value %}selected{% endif %}>{{ country.1 }}</option>
                    {% endfor %}
                </select>
                <div class="error-message">{% for error in form.country.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group">
                <label>Номер телефону</label>
                <input type="text" name="phone_number" class="input-field" placeholder="Введіть номер телефону" value="{{ form.phone_number.value|default:'' }}">
                <div class="error-message">{% for error in form.phone_number.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group">
                <label>Пароль</label>
                <input type="password" name="password" class="input-field password-input" placeholder="Введіть пароль">
                <div class="error-message">{% for error in form.password.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group">
                <label>Підтвердження пароля</label>
                <input type="password" name="confirm_password" class="input-field password-input" placeholder="Підтвердіть пароль">
                <div class="error-message">{% for error in form.confirm_password.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group checkbox-group">
                <input type="checkbox" id="showPassword" onclick="togglePasswordVisibility()">
                <label for="showPassword">Показати пароль</label>
            </div>

            <div class="form-group checkbox-group">
                <input type="checkbox" id="agreeToTerms" name="agree_to_terms">
                <label for="agreeToTerms">Я погоджуюсь з <a href="{% url 'usage_agreement' %}">угодою про користування</a></label>
                <div class="error-message">{% for error in form.agree_to_terms.errors %}{{ error }}{% endfor %}</div>
            </div>

            <div class="form-group button-group">
                <button type="submit" class="submit-button">Зареєструватися</button>
                <a href="{% url 'login' %}" class="cancel-button">Скасувати</a>
            </div>
        </form>
    </div>
</div>

<script>
    function togglePasswordVisibility() {
        const passwordFields = document.querySelectorAll('.password-input');
        passwordFields.forEach(field => {
            field.type = field.type === 'password' ? 'text' : 'password';
        });
    }

    document.querySelector('form').addEventListener('submit', function(event) {
        const agreeToTerms = document.getElementById('agreeToTerms');
        if (!agreeToTerms.checked) {
            event.preventDefault();
            agreeToTerms.classList.add('invalid-checkbox');
        } else {
            agreeToTerms.classList.remove('invalid-checkbox');
        }
    });
</script>
{% endblock %}
